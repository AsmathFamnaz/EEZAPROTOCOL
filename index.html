<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>The Eeza Protocol — Gong Enterprises</title>
<style>
  body {
    margin: 0;
    color: #e6eef8;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background-image: url('background.png');
    background-size: cover;
    padding: 24px;
    font-family: Inter, sans-serif;
  }
  .wrap {
    width: 100%;
    max-width: 920px;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
  }
  .card {
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.04);
    padding:22px;
    border-radius:12px;
    backdrop-filter: blur(6px);
    width: 100%;
    max-width: 500px;
    text-align: center;
  }
  #timerDisplay {
    font-size: 24px;
    color: #ff6b6b;
    font-weight: bold;
    text-shadow: 0 0 10px #ff0000;
    margin-bottom: 20px;
  }
  .virus-banner {
    position: fixed;
    left: 50%;
    top: 5%;
    transform: translate(-50%, -50%);
    padding: 30px 60px;
    border-radius: 20px;
    z-index: 9999;
    font-weight: 900;
    letter-spacing: 3px;
    text-transform: uppercase;
    text-align: center;
    background: none;
    color: #b8ffb2;
    text-shadow: 0 0 20px #00ff66, 0 0 40px #00ff66;
    display: none;
    animation: flickerMove 1.6s infinite;
  }
  .virus-banner.show { display: block; }
  @keyframes flickerMove {
    0% { opacity:1; transform:translateX(-50%) translateY(0) }
    25% { opacity:0.8; transform:translateX(-50%) translateY(-8px) }
    50% { opacity:1; transform:translateX(-50%) translateY(4px) }
    75% { opacity:0.85; transform:translateX(-50%) translateY(-4px) }
    100% { opacity:1; transform:translateX(-50%) translateY(0) }
  }
  button {
    margin-top: 10px;
    padding: 10px 20px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    background: #7dd3fc;
    color: #0f1724;
    cursor: pointer;
    font-weight: bold;
    margin-right: 10px;
  }
  button:hover { background: #38bdf8; }
  select, input { padding: 8px; width: 80%; margin-bottom: 10px; border-radius: 6px; border: 1px solid #ccc; }
</style>
</head>
<body>
  <div class="wrap">
    <div id="timerDisplay">Time Left: 15:00</div>
    <div class="card">
      <h2>Final Group Validation Console</h2>
      <form id="finalForm" autocomplete="off" onsubmit="return false">
        <label>Select Group</label><br>
        <select id="groupSelect">
          <option value="">-- Choose Group --</option>
          <option value="1">Group 1</option>
          <option value="2">Group 2</option>
          <option value="3">Group 3</option>
          <option value="4">Group 4</option>
          <option value="5">Group 5</option>
          <option value="6">Group 6</option>
        </select><br>
        <input id="secretCode" type="text" maxlength="20" placeholder="Enter your secret code" required /><br>
        <button id="startBtn" type="button">Start Timer</button>
        <button id="checkBtn" type="button">Validate Code</button>
      </form>
    </div>
  </div>

  <div id="virus" class="virus-banner">
    <p style="font-size:80px;">ACCESS GRANTED</p>
    <br><p style="font-size:30px;">Network Restored</p>
  </div>

<script>
(() => {
  const VALID_CODES = {1:"CRYPTO",2:"SECRET",3:"OMEGA9",4:"ZENIX42",5:"SPY2025",6:"REDWALL"};
  const groupSelect = document.getElementById('groupSelect');
  const secretCode = document.getElementById('secretCode');
  const virus = document.getElementById('virus');
  const timerDisplay = document.getElementById('timerDisplay');
  const startBtn = document.getElementById('startBtn');

  let timeLeft = 15*60;
  let timer = null;

  function formatTime(t) {
    const m = Math.floor(t/60), s = t%60;
    return `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
  }

  function updateTimerDisplay() {
    timerDisplay.textContent = `Time Left: ${formatTime(timeLeft)}`;
  }

  function startCountdown() {
    if (timer) clearInterval(timer);
    timer = setInterval(() => {
      if (timeLeft > 0) {
        timeLeft--;
        updateTimerDisplay();
      } else {
        clearInterval(timer);
        timerDisplay.textContent = '⛔ Time Over!';
      }
    }, 1000);
  }

  startBtn.addEventListener('click', () => {
    if (!groupSelect.value) return alert("Select a group first!");
    timeLeft = 15*60; // reset timer on start
    updateTimerDisplay();
    startCountdown();
  });

  document.getElementById('checkBtn').addEventListener('click', () => {
    if (!groupSelect.value) return alert("Select a group first!");
    const code = secretCode.value.trim().toUpperCase();
    if (code === VALID_CODES[groupSelect.value]) {
      clearInterval(timer);
      virus.classList.add('show');

      const dataToSend = {
        group: groupSelect.value,
        timeTaken: 15*60 - timeLeft,
        validatedAt: new Date().toISOString()
      };

      // POST to server endpoint
      fetch('https://asmathfamnaz.github.io/EEZAPROTOCOL/results.html', { // replace with your endpoint
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(dataToSend)
      })
      .then(res => {
        if(res.ok) alert(`✅ Group ${groupSelect.value} validated! Time sent to server.`);
        else alert(`❌ Server error!`);
      })
      .catch(err => {
        console.error(err);
        alert("❌ Network error! Could not send data.");
      });

    } else {
      alert("❌ Incorrect code!");
    }
  });

})();
</script>
</body>
</html>
